<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="_csrf" th:content="${_csrf.token}">
    <meta name="_csrf_header" th:content="${_csrf.headerName}">
    <title>归档</title>

    <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <!-- 导入jq -->
    <script type="text/javascript" src="http://localhost:8080/webjars/jquery/3.4.1/jquery.min.js"></script>
    <!--    <script type="text/javascript" src="../static/js/jquery-3.4.1.js"></script>-->
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous">
    </script>


</head>
<style>
    *{
        margin: 0 auto;
        padding: 0;
    }
    a {
        color: black;
        text-decoration: none;
    }
    #heads{
        width: 1300px;
        height: 55px;
        padding-top: 10px;
        padding-bottom: 10px;
        border-bottom-style: solid;
        border-color: #CCCCCC;

    }
    .LogoAndName{
        width: 200px;
        float: left;
        cursor: pointer;
    }
    .logoLeft{
        width: 35px;
        height: 35px;
    }
    .blogName{
        height: 35px;
        width: 100px;
        font-size: 18px;
        color: #333333;
        display: inline-block;
    }

    .search{
        width: 500px;
        float: left;
        margin-left: 50px;
    }
    .label1{
        width: 80px;
        height: 35px;
        line-height: 35px;
        float: left;
    }
    .spanFont1{
        font-size: 15px;
    }
    .changeColor:hover{color: #99CCFF;cursor: pointer;}

    .LoginAndRegister{
        width: 200px;
        height: 35px;
        float: left;
        text-align: center;
        margin-left: 350px;
    }

    #main{
        width: 1300px;
        height: 800px;
    }
    .mains{
        width: 750px;
        height: 100%;

    }
    .catalogue{
        width: 30%;
        height: 100%;
        float: left;
    }
    .catalogueM{
        width: 70%;
        height: 100%;

        float: left;
    }
    li{
        list-style: none;
        font-size: 15px;
        font-weight: bolder;
        margin: 15px 20px;
    }
    li:hover{color: #00c4ff;cursor: pointer;}

    .timeline-wrap {
        border-left: 3px solid #eceff2;
        margin-bottom: 50px;
    }
    .timeline-row {
        margin: 20px 0;
    }
    .timeline-row .node {
        color: #fff;
        width: 14px;
        height: 14px;
        font-size: 14px;
        margin: 0 0 0 -17px;
        padding: 6px 8px 10px;
        display: inline-block;
        background-color: #38b7ea;
        border-radius: 50%;
    }
    .title {
        font-size: 18px;
        margin-left: 10px;
        line-height: 30px;
        display: inline-block;
        margin-top: 0;
        font-weight: 500;
    }
    .timeline-row-major {
        margin: 20px 0;
    }
    .timeline-row-major .node {
        width: 12px;
        color: #fff;
        height: 12px;
        border-radius: 50%;
        margin: 11px 0 0 -8px;
        display: inline-block;
        background-color: #38b7ea;
        float: left;
    }
    .timeline-row-major .content {
        margin-left: 30px;
        box-shadow: 0 2px 5px 0 rgba(0,0,0,0.16), 0 2px 10px 0 rgba(0,0,0,0.12);
    }
    .am-comment-hd {
        background: #f8f8f8;
        border-bottom: 1px solid #eee;
        display: -webkit-box;
        display: -webkit-flex;
        display: -ms-flexbox;
        display: flex;
    }
    .contentTitle {
        color: #565a5f;
        font-size: 17px;
    }
    .am-comment-meta {
        -webkit-box-flex: 1;
        -webkit-flex: 1;
        -ms-flex: 1;
        flex: 1;
        padding: 10px 15px;
        font-size: 13px;
        color: #999;
        line-height: 1.2;
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
    }
    .am-comment-meta a {
        color: #999;
    }
    .am-comment-bd {
        color: #898d92;
        display: inline-block;
        background-color: rgba(244,246,247,0.2);
        width: 100%;
        padding: 10px 5px 5px 15px;
    }
    .am-comment-bd i {
        margin-right: 8px;
        line-height: 2em;
        font-size: 13px;
    }
    .am-comment-bd a {
        margin-left: 2px;
        color: #898d92;
    }
    .am-comment-bd-tags {
        display: inline-block;
    }
    .am-comment-bd i {
        margin-right: 8px;
        line-height: 2em;
        font-size: 13px;
    }
    .am-comment-bd-tags a {
        display: inline-block;
    }


    #commentRecord{
        width: 800px;
        height: 500px;
        margin-top: 80px;
        position: relative;
    }
    .comment-top-input{
        height: 100px;
        border: 1px solid #4398ed;
        padding: 15px 15px 5px;
        margin: 25px 60px;
        border-radius: 7px;
    }
    .comment-input{
        width: 100%;
        height: 50px;
        background: 0 0;
        overflow-x: hidden;
        overflow-y: auto;
        border: 0;
        font-size: 14px;
        resize: none;
        line-height: normal;
        text-align: left;
        outline: none;
    }
    .commentBtn{
        float: right;
        margin: 10px 50px;
    }
    #commentBtn{
        padding: 5px 10px;
        color: #fff;
        background-color: #3bb4f2;
        border-color: #3bb4f2;
    }
    .comment-bottom{
        width: 800px;
        margin: 20px 0 50px;
    }
    .article-comment{
        margin: 70px 50px 0;
    }
    .article-comment-top{
        box-sizing: border-box;
    }
    .article-comment-word{
        font-size: 17px;
        padding: 6px 15px 6px;
        border-top-right-radius: 10px;
        border-top-left-radius: 10px;
        border-top: 1px solid #4398ed;
        border-left: 1px solid #4398ed;
        border-right: 1px solid #4398ed;
        color: #4398ed;
    }
    .article-comment-line{
        left: 37px;
        width: 92%;
        border-bottom: 1px solid #4398ed;
        margin-top: 3px;
        position: relative;
    }
    .new-comment{
        margin: 10px 0;
        color: #4398ed;
        padding-left: 45px;
    }

    .visitorComment {
        margin-top: 15px;
    }
    .am-g{
        margin-left: -1.5rem;
        margin-right: -1.5rem;
    }
    .am-u-lg-1 {
        width: 8.33333333%;
    }
    .visitorCommentImg img {
        width: 50px;
        padding: 0;
        border-radius: 50%;
        height: 50px;
    }
    .am-u-lg-11 {
        width: 91.66666667%;
    }
    .visitorInfo {
        display: block;
    }
    .visitorFloor {
        margin-left: 15px;
    }
    .visitorName {
        float: left;
        color: #4398ed;
    }
    .visitorPublishDate {
        float: right;
        padding: 5px 0 0;
        font-family: Arial;
        color: #a0a0a0;
    }
    .visitorSay {
        margin-top: 5px;
        display: block;
        padding: 8px 0;
        font-size: 14px;
    }
    .tool-group {
        margin: 0 10px 7px 0;
        display: inline-block;
    }
    .like {
        margin-right: 13px;
    }
    .sub-comment-list {
        padding: 5px 0 5px 20px;
        border-left: 2px solid #d9d9d9;
    }
    .visitorReplyWords {
        font-size: 14px;
    }
    .visitorReplyWords a {
        text-decoration: none;
    }
    .visitorReplyTime {
        color: #969696;
        margin: 3px auto;
    }
    .visitorReplyTimeTime {
        margin: 0 10px 0 0;
    }
    .am-divider-dashed {
        border-top: 1px dashed #ccc;
    }
    hr {
        display: block;
        padding: 0;
        border: 0;
        height: 0;
        border-top: 1px solid #eee;
        box-sizing: content-box;
    }
    .reply-sub-comment-list {
        padding: 5px 0 5px 20px;
        border-left: 2px solid #d9d9d9;
        display: none;
    }
    .replyWordTextarea {
        padding: 10px 15px;
        width: 100%;
        height: 80px;
        font-size: 13px;
        border: 1px solid #dcdcdc;
        border-radius: 4px;
        background-color: hsla(0,0%,71%,.1);
        resize: none;
        display: inline-block;
        vertical-align: top;
        outline-style: none;
    }
    .sendReplyWordBtn {
        border-radius: 50px;
        float: right;
        margin-top: 7px;
    }
    .am-btn-success {
        color: #fff;
        background-color: #5eb95e;
        border-color: #5eb95e;
    }
    .quitReplyWordBtn {
        margin-right: 10px;
        float: right;
        background-color: white;
        color: #9ca3ac;
        margin-top: 7px;
    }
    .am-btn {
        display: inline-block;
        margin-bottom: 0;
        padding: .5em 1em;
        vertical-align: middle;
        font-size: 1.6rem;
        font-weight: 400;
        line-height: 1.2;
        text-align: center;
        white-space: nowrap;
        background-image: none;
        border: 1px solid transparent;
        border-radius: 0;
        cursor: pointer;
        outline: 0;
        -webkit-appearance: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        -webkit-transition: background-color .3s ease-out,border-color .3s ease-out;
        transition: background-color .3s ease-out,border-color .3s ease-out;
    }

    a {
        color: black;
        text-decoration: none;
    }
</style>
<body>
<!-- 导航栏 -->
<div id="heads" th:include="index::#heads"></div>

<div id="main">
    <div class="mains">
        <!-- 分类目录 -->
        <div class="catalogue">
            <h3>Archives</h3>
            <ul>
                <li>2020年5月</li>
            </ul>
        </div><!-- 分类目录结尾 -->

        <!-- 目录相应显示的模块 -->
        <div class="catalogueM">

            <div class="timeline timeline-wrap">
                <div class="timeline-row">
                    <span class="node" style="-webkit-box-sizing: content-box;-moz-box-sizing: content-box;box-sizing: content-box;"><i class="glyphicon glyphicon-calendar"></i></span>
                    <h1 class="title"># 很好! 目前总计59篇日志，继续努力。</h1>
                </div>


<!--                &lt;!&ndash; 行模块 &ndash;&gt;-->
<!--                <div class="timeline-row-major">-->
<!--                    <span class="node am-animation-slide-top am-animation-delay-1"></span>-->
<!--                    <div class="content am-comment-main am-animation-slide-top am-animation-delay-1">-->
<!--                        <header class="am-comment-hd" style="background: #fff">-->
<!--                            <div class="contentTitle am-comment-meta">-->
<!--                                <a href="#">愿你编码半生，归来仍是少年</a>-->
<!--                            </div></header>-->
<!--                        <div class="am-comment-bd">-->
<!--                            <i class="glyphicon glyphicon-calendar"> <a href="#">2019-11-05</a></i>-->
<!--                            <i class="glyphicon glyphicon-folder-close"> <a href="#">我的故事</a></i>-->
<!--                            <i class="glyphicon glyphicon-tag"><a href="#">生活跪记</a>,<a>原创</a></i>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>&lt;!&ndash; 行模块结尾 &ndash;&gt;-->


            </div>
        </div><!-- 目录相应显示的模块结尾 -->

    </div>

    <!-- 评论模块 -->
    <div id="commentRecord">
        <!-- 发表评论模块 -->
        <div class="comment-top-input">
            <!-- readonly禁止编辑 -->
            <textarea class="comment-input" th:if="${session.user}" placeholder="写下你的留言..."></textarea>
        </div><!-- 发表评论模块结尾 -->
        <!-- 提交评论 -->
        <div class="commentBtn">
            <button id="commentBtn" type="button">发表留言</button>
        </div><!-- 提交评论结尾 -->

        <!-- 用户评论模块 -->
        <div class="comment-bottom">
            <div class="article-comment">
                <div class="article-comment-top">
                    <span class="article-comment-word">留言</span>
                    <div class="article-comment-line"></div>
                </div>
            </div>
            <div class="new-comment">
                <i class="all-comment am-icon-ellipsis-v"></i>全部留言（<span class="commentNum">35</span>）
            </div>

            <div class="all-comments">
                <!-- 楼评论 -->
                <div class="visitorComment" style="width: 600px;">
                    <div class="am-g">
                        <!-- 头像 -->
                        <div class="visitorCommentImg am-u-sm-2 am-u-lg-1" style="float:left;">
                            <img src="https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/user/avatar/noLogin_male.jpg">
                        </div><!-- 头像结尾 -->
                        <div class="am-u-sm-10 am-u-lg-11">
                            <!-- 一级评论 -->
                            <div>
                                <div class="visitorInfo">
                                    <span class="visitorFloor">#9楼</span>
                                    <span class="visitorName">ykb</span>
                                    <span class="visitorPublishDate">2020-04-18 13:07</span>
                                </div>
                                <div class="visitorSay">hhh</div>
                                <div class="tool-group">
                                    <a><i class="like glyphicon glyphicon-thumbs-up">&nbsp;&nbsp;<span>0</span>人赞</i></a>
                                    <a><i class="replyReply glyphicon glyphicon-comment">&nbsp;&nbsp;回复</i></a>
                                </div>
                            </div><!-- 一级评论结尾 -->

                            <!-- 二、三级评论 -->
                            <div class="sub-comment-list">
                                <div class="visitorReplies">
                                    <div class="visitorReply">
                                        <div class="visitorReplyWords"><a class="answerer">ykb</a>：<a class="respondent">@ykb</a>&nbsp;&nbsp; dsfdsf</div>
                                        <div class="visitorReplyTime">
                                            <span class="visitorReplyTimeTime">2020-04-18 13:13</span>
                                            <a><i class="replyReply am-icon-comment-o glyphicon glyphicon-comment">&nbsp;&nbsp;回复</i></a>
                                        </div>
                                        <hr data-am-widget="divider" style="" class="am-divider am-divider-dashed">
                                    </div>
                                </div>
                                <div class="more-comment"><a><i class="moreComment am-icon-edit glyphicon glyphicon-edit"> 添加新评论</i></a></div>
                            </div><!-- 二、三级评论结尾 -->

                            <!-- 写二、三级评论 -->
                            <div class="reply-sub-comment-list am-animation-slide-bottom" style="display: none;" >
                                <div class="replyWord">
                                    <div class="replyWordBtn">
                                        <textarea class="replyWordTextarea" placeholder="写下你的评论..."></textarea>
                                        <button type="button" class="sendReplyWordBtn am-btn am-btn-success">发送</button>
                                        <button type="button" class="quitReplyWordBtn am-btn">取消</button>
                                    </div>
                                </div>
                            </div><!-- 写二、三级评论结尾 -->

                        </div>
                    </div>
                </div><!-- 楼评论结尾 -->
                <hr>
            </div>

        </div>
    </div><!-- 用户评论模块结尾 -->
</div><!-- 评论模块结尾 -->


</div>

<!-- 保存楼层数（pid） -->
<input id="pid" type="text" hidden="hidden" value="1">
<!-- 保存文章id -->
<input id="articleId" type="text" hidden="hidden" th:value="${session.articleID}">
<!-- 保存用户名 -->
<input id="originalauthor" type="text" hidden="hidden" th:value="${session.user.getUsername()}">
<!-- 保存用户id -->
<input id="userID" type="text" hidden="hidden" th:value="${session.user.getId()}">


<script>


    $(document).ready(function () {
        var token = $("meta[name='_csrf']").attr("content")
        var header = $("meta[name='_csrf_header']").attr("content")
        $(document).ajaxSend(function (e, xhr, options) {
            xhr.setRequestHeader(header, token);
        })

        $("#commentBtn").click(function () {
            //先判断发表内容是否为空
            if($(".comment-input").val() != ""){
                //发表一级评论
                $.ajax({
                    type: "post",
                    url: "/insertOneComment",
                    data: {pid:$("#pid").val(), commentcontent:$(".comment-input").val(), originalauthor:$("#originalauthor").val(),articleid:$("#articleId").val() },
                    dataType: "json",
                    success: function (data) {
                        console.log("成功")
                        //先清空块内容,不然楼层会重复
                        $(".all-comments").html("");
                        start();
                    },
                    error: function (data) {
                        console.log("失败")
                    }
                });
            }else{
                alert("评论为空")
            }
        })


        //全部分类初始化
        function startC(){
            $.ajax({
                type: "post",
                url: "/startClass",
                data: {currentPage:$(this).text()},
                dataType: "json",
                success: function (data) {
                    var s = "";
                    //日志数
                    var num = 0;
                    $.each(data, function (i, val) {
                        s += "<div class=\"timeline-row-major\">\n" +
                            "                    <span class=\"node am-animation-slide-top am-animation-delay-1\"></span>\n" +
                            "                    <div class=\"content am-comment-main am-animation-slide-top am-animation-delay-1\">\n" +
                            "                        <header class=\"am-comment-hd\" style=\"background: #fff\">\n" +
                            "                            <div class=\"contentTitle am-comment-meta\">\n" +
                            "                                <a href=\""+"/article/"+val.articleid+"\">"+val.articletitle+"</a>\n" +
                            "                            </div></header>\n" +
                            "                        <div class=\"am-comment-bd\">\n" +
                            "                            <i class=\"glyphicon glyphicon-calendar\"> <a href=\"#\">"+val.updatedate+"</a></i>\n" +
                            "                            <i class=\"glyphicon glyphicon-folder-close\"> <a href=\"#\">"+val.articletype+"</a></i>\n" +
                            "                            <i class=\"glyphicon glyphicon-tag\"><a href=\"#\">"+val.articletags+"</a>,<a>原创</a></i>\n" +
                            "                        </div>\n" +
                            "                    </div>\n" +
                            "                </div>";
                        num = i+1;
                    })
                    $(".title").text("# 很好! 目前总计"+num+"篇日志，继续努力。")
                    $(".timeline").append(s)
                    console.log("成功")
                },
                error: function (data) {
                    console.log("失败")
                }
            });
        }
        startC();



        //初始化
        function start(){

            $.ajax({
                type: "get",
                url: "/getComment",
                data: {},
                dataType: "json",
                success: function (data) {
                    //用于保存楼层数，发表一级评论的时候就可以 楼层数+1形成pid传入
                    var pid;
                    //先循环一级评论形成楼层
                    $.each(data["oneComment"], function (i,val) {

                        var id = val.pid;
                        //头
                        var head = "<div class=\"visitorComment\" style=\"width: 600px;\"><div class=\"am-g\">";
                        //头像
                        var headImg = "<div class=\"visitorCommentImg am-u-sm-2 am-u-lg-1\" style=\"float:left;\">\n" +
                            "            <img src=\"https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/user/avatar/noLogin_male.jpg\">\n" +
                            "        </div>";
                        //评论模块开头
                        var headComment = "<div class=\"am-u-sm-10 am-u-lg-11\">";
                        //一级评论
                        var oneComment = "<div>\n" +
                            "                <div class=\"visitorInfo\">\n" +
                            "                    <span class=\"visitorFloor\">#"+(i+1)+"楼</span>\n" +
                            "                    <input class=\"visitorFloorID\" type='text' hidden='hidden' value='"+(i+1)+"' />\n" +
                            "                    <span class=\"visitorName\">"+val.originalauthor+"</span>\n" +
                            "                    <span class=\"visitorPublishDate\">"+val.commentdate+"</span>\n" +
                            "                </div>\n" +
                            "                <div class=\"visitorSay\">"+val.commentcontent+"</div>\n" +
                            "                <div class=\"tool-group\">\n" +
                            "                    <a><i class=\"like glyphicon glyphicon-thumbs-up\">&nbsp;&nbsp;<span>"+val.likes+"</span>人赞</i></a>\n" +
                            "                </div>\n" +
                            "            </div>";


                        //用户评论模块开头
                        var userHeadComment = "<div class=\"sub-comment\">"+ "<div class=\"sub-comment\">\n" +
                            "                <div class=\"sub-comment-list\">\n" ;
                        var TwoComment = "";
                        //二级评论模块
                        $.each(data["twoComment"], function (j, val) {
                            if (val.pid == id) {
                                TwoComment +=
                                    "                    <div class=\"visitorReplies\">\n" +
                                    "                        <div class=\"visitorReply\">\n" +
                                    "                            <div class=\"visitorReplyWords\"><a class=\"answerer\">"+val.originalauthor+"</a>：<a class=\"respondent\">@"+(i+1)+"楼主</a>&nbsp;&nbsp; "+val.commentcontent+"</div>\n" +
                                    "                    <input class=\"answereID\" type='text' hidden='hidden' value='"+val.answereid+"' />\n" +
                                    "                            <div class=\"visitorReplyTime\">\n" +
                                    "                                <span class=\"visitorReplyTimeTime\">"+val.commentdate+"</span>\n" +
                                    "                                <a><i class=\"replyReply am-icon-comment-o glyphicon glyphicon-comment  two-reply\">&nbsp;&nbsp;回复</i></a>\n" +
                                    "                            </div>\n" +
                                    "                            <hr data-am-widget=\"divider\" style=\"\" class=\"am-divider am-divider-dashed\">\n" +
                                    "                        </div>\n" +
                                    "                    </div>\n" ;
                            }
                        });
                        var ThreeComment = "";

                        //被评论用户
                        var byUser = "";
                        //三级评论
                        $.each(data["threeComment"], function (i,val) {
                            if((i+1)%2 ==0){
                                byUser = val.originalauthor;
                            }
                            if (val.pid == id) {
                                ThreeComment +=
                                    "                    <div class=\"visitorReplies\">\n" +
                                    "                        <div class=\"visitorReply\">\n" +
                                    "                            <div class=\"visitorReplyWords\"><a class=\"answerer\">"+val.originalauthor+"</a>：<a class=\"respondent\">@"+byUser+"</a>&nbsp;&nbsp; "+val.commentcontent+"</div>\n" +
                                    "                    <input class=\"respondentID\" type='text' hidden='hidden' value='"+val.respondentid+"' />\n" +
                                    "                            <div class=\"visitorReplyTime\">\n" +
                                    "                                <span class=\"visitorReplyTimeTime\">"+val.commentdate+"</span>\n" +
                                    "                                <a><i class=\"replyReply am-icon-comment-o glyphicon glyphicon-comment three-reply \">&nbsp;&nbsp;回复</i></a>\n" +
                                    "                            </div>\n" +
                                    "                            <hr data-am-widget=\"divider\" style=\"\" class=\"am-divider am-divider-dashed\">\n" +
                                    "                        </div>\n" +
                                    "                    </div>\n" ;
                            }
                        });

                        //写二、三级评论模块
                        var writeTwoThree =
                            "                    <div class=\"more-comment\"><a><i class=\"moreComment am-icon-edit glyphicon glyphicon-edit\"> 添加新评论</i></a></div>\n" +
                            "                </div>"+
                            "<div class=\"reply-sub-comment-list am-animation-slide-bottom\" style=\"display: none;\">\n" +
                            "                    <div class=\"replyWord\" ><div class=\"replyWordBtn\">\n" +
                            "                        <textarea class=\"replyWordTextarea\" placeholder=\"写下你的评论...\"></textarea>\n" +
                            "                        <button type=\"button\" class=\"sendReplyWordBtn am-btn am-btn-success\">发送</button>\n" +
                            "                        <button type=\"button\" class=\"quitReplyWordBtn am-btn\">取消</button>\n" +
                            "                    </div>\n" +
                            "                    </div>\n" +
                            "                </div>";

                        //用户评论模块结尾
                        var lastHeadComment = "</div>";
                        //评论模块结尾
                        var lastComment = "</div>";
                        //尾
                        var last = "</div></div><!-- 楼评论结尾 --><hr>\n" +
                            "<hr>\n";
                        $(".all-comments").prepend(head+headImg+headComment+oneComment+userHeadComment+TwoComment+ThreeComment+writeTwoThree+lastHeadComment+lastComment+last);

                        $("#pid").attr("value",i+2);
                    })

                    //因为ajax是最后执行的所以应该在ajax完结的最后添加点击事件
                    //添加新评论事件(相当于二级评论)
                    $(".more-comment").click(function () {
                        $(this).closest(".am-g").find(".am-animation-slide-bottom").show();
                        var pid = $(this).closest(".am-g").find(".visitorFloorID").val();

                        $(this).closest(".am-g").find(".sendReplyWordBtn").click(function () {
                            //先判断发表内容是否为空
                            if($(this).closest(".am-g").find(".replyWordTextarea").val() != ""){
                                //发表二级评论
                                $.ajax({
                                    type: "post",
                                    url: "/insertTwoComment",
                                    data: {pid: pid,
                                        commentcontent:$(this).closest(".am-g").find(".replyWordTextarea").val(),
                                        originalauthor:$("#originalauthor").val(),
                                        articleid:$("#articleId").val(),
                                        answereid:$("#userID").val()},
                                    dataType: "json",
                                    success: function (data) {
                                        console.log("成功")
                                        //先清空块内容,不然楼层会重复
                                        $(".all-comments").html("");
                                        start();
                                    },
                                    error: function (data) {
                                        console.log("失败")
                                    }
                                });
                            }else{
                                alert("评论为空")
                            }
                        })
                    })


                    //回复事件（二级评论转三级评论）
                    $(".two-reply").click(function () {
                        $(this).closest(".am-g").find(".am-animation-slide-bottom").show();
                        var pid = $(this).closest(".am-g").find(".visitorFloorID").val();
                        $(this).closest(".am-g").find(".sendReplyWordBtn").click(function () {
                            // console.log($(this).closest(".am-g").find(".respondentID").val());
                            console.log($(this).closest(".am-g").find(".answereID").val());
                            //先判断发表内容是否为空
                            if($(this).closest(".am-g").find(".replyWordTextarea").val() != ""){
                                //发表三级评论
                                $.ajax({
                                    type: "post",
                                    url: "/insertThreeComment",
                                    data: {pid: pid,
                                        commentcontent:$(this).closest(".am-g").find(".replyWordTextarea").val(),
                                        originalauthor:$("#originalauthor").val(),
                                        articleid:$("#articleId").val(),
                                        answereid:$("#userID").val(),
                                        respondentid:$(this).closest(".am-g").find(".answereID").val()},
                                    dataType: "json",
                                    success: function (data) {
                                        console.log("成功")
                                        //先清空块内容,不然楼层会重复
                                        $(".all-comments").html("");
                                        start();
                                    },
                                    error: function (data) {
                                        console.log("失败")
                                    }
                                });
                            }else{
                                alert("评论为空")
                            }
                        })
                    })


                    //回复事件（三级评论）
                    $(".three-reply").click(function () {
                        $(this).closest(".am-g").find(".am-animation-slide-bottom").show();
                        var pid = $(this).closest(".am-g").find(".visitorFloorID").val();
                        $(this).closest(".am-g").find(".sendReplyWordBtn").click(function () {
                            console.log($(this).closest(".am-g").find(".respondentID").val());
                            // console.log($(this).closest(".am-g").find(".answereID").val());
                            //先判断发表内容是否为空
                            if($(this).closest(".am-g").find(".replyWordTextarea").val() != ""){
                                //发表三级评论
                                $.ajax({
                                    type: "post",
                                    url: "/insertThreeComment",
                                    data: {pid: pid,
                                        commentcontent:$(this).closest(".am-g").find(".replyWordTextarea").val(),
                                        originalauthor:$("#originalauthor").val(),
                                        articleid:$("#articleId").val(),
                                        answereid:$("#userID").val(),
                                        respondentid:$(this).closest(".am-g").find(".respondentID").val()},
                                    dataType: "json",
                                    success: function (data) {
                                        console.log("成功")
                                        //先清空块内容,不然楼层会重复
                                        $(".all-comments").html("");
                                        start();
                                    },
                                    error: function (data) {
                                        console.log("失败")
                                    }
                                });
                            }else{
                                alert("评论为空")
                            }
                        })
                    })

                    //取消
                    $(".quitReplyWordBtn").click(function () {
                        $(".am-animation-slide-bottom").hide();
                    })

                },
                error: function (data) {
                    console.log("错误")
                }
            });

        }

        //先让评论初始化
        start();

    })



</script>



</body>
</html>